<h1>マイマップの登録一覧</h1>

<% if @way_points.present? %>
<ul data-role="listview" data-inset="true" class="sortable">
  <% @way_points.each do |way_point| %>
  <li><%= link_to way_point.place.name, "/places/#{way_point.place.id}" %></li>
  <% end %>
</ul>
<% end %>

<br>

<script>
(function () {
    'use strict';
    $(document).bind('pageinit', function () {
        var wayPoints, postData = {};
        $("#sortable").sortable();
        $("#sortable").disableSelection();
        $("#sortable").bind("sortstop", function () {
            wayPoints = $("#sortable").sortable("toArray");
            postData.sort = wayPoints;
            postData['_method'] = 'put';
            $.ajax({
                url: window.location.href,
                type: "POST",
                dataType: "text",
                data: postData
            });
            $("#sortable").listview('refresh');
        });
    });
}());
</script>
<!--
<%= link_to 'New My map', new_my_map_path %>
-->
	<%= link_to "マップを表示", :map_index, data: {role: :button} %>
	<%= link_to "マイマップの削除", @my_map, method: :delete, data: {role: :button} %>
	<%= link_to "トップへ", :home_index, data: {role: :button} %>
